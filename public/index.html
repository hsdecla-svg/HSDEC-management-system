import React, { useState, useEffect } from 'react';
import { createClient } from '@supabase/supabase-js';

const supabase = createClient('https://zgmqllufmqanixgwdjok.supabase.co', 'sb_publishable_vOgl-K0RTxyK9i0WJp7UwA_PlwVgESz');

export default function App() {
  const [workers, setWorkers] = useState<any[]>([]);
  const [name, setName] = useState('');

  const fetchWorkers = async () => {
    const { data } = await supabase.from('workers').select('*').order('created_at', { ascending: false });
    if (data) setWorkers(data);
  };

  useEffect(() => { fetchWorkers(); }, []);

  const handleSave = async () => {
    if (!name) return alert('åå‰ã‚’å…¥ã‚Œã¦ãã ã•ã„');
    await supabase.from('workers').insert([{ name_eng: name, status: 'æ–°è¦å—ä»˜' }]);
    setName('');
    fetchWorkers();
  };

  return (
    <div style={{ padding: '20px', textAlign: 'center', fontFamily: 'sans-serif' }}>
      <h1>ğŸ‡±ğŸ‡¦ HSDEC System</h1>
      <input value={name} onChange={(e) => setName(e.target.value)} placeholder="Worker Name" style={{ padding: '10px' }} />
      <button onClick={handleSave} style={{ padding: '10px', marginLeft: '5px', backgroundColor: '#ed8936', color: 'white', border: 'none' }}>ç™»éŒ²</button>
      <ul style={{ textAlign: 'left', maxWidth: '300px', margin: '20px auto' }}>
        {workers.map(w => <li key={w.id}>{w.name_eng}</li>)}
      </ul>
    </div>
  );
}

